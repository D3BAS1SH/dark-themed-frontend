---
import DefaultLayout from "../layouts/Default.astro";
import { HeaderSection } from "../sections/Header";
import { HeroSection } from "../sections/Hero";
import { FeatureCardSection } from "../sections/FeatureCards";
import { FeatureGrid } from '../sections/FeatureGrid';
import { LatestPosts } from '../sections/LatestPost';
import { TestimonialsSection } from "../sections/Testimonial";
import { CallToAction } from "../sections/CallToAction";
import { FooterSection } from "../sections/Footer";
import { getCollection } from "astro:content";

const posts = await getCollection('blog');
const latestPosts = posts.sort((a,b)=>{
  if(a.data.pubDate.valueOf() == b.data.pubDate.valueOf()) return 0;
  return a.data.pubDate.valueOf() > b.data.pubDate.valueOf()?-1:1;
}).slice(0,4)
---

<DefaultLayout>
  <HeaderSection/>
  <HeroSection client:load/>
  <FeatureCardSection client:load/>
  <FeatureGrid client:load/>
  <LatestPosts latestPosts={latestPosts} client:load/>
  <TestimonialsSection client:load/>
  <CallToAction client:load/>
  <FooterSection/>
</DefaultLayout>
